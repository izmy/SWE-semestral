PREFIX economy: <http://hrachjar.cz/economy/#>
PREFIX country: <http://hrachjar.cz/country/#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX dbo: <http://dbpedia.org/ontology/#>

PREFIX qb: <http://purl.org/linked-data/cube#>
PREFIX eg: <http://example.org/ns#>
PREFIX sdmx-dimension:  <http://purl.org/linked-data/sdmx/2009/dimension#>

CONSTRUCT {
    ?aUri a economy:Economy;
          country:country ?countryUri;
          .
    ?year a qb:Observation ;
          qb:dataSet eg:dataset ;
          eg:refArea ?aUri ;
          sdmx-dimension:refPerio  <http://reference.data.gov.uk/id/gregorian-interval/2014-01-01T00:00:00/P1Y> ;
          eg:gdb ?gdb;
          eg:gdbGrowth ?gdbGrowth;
          eg:gdpPerCapita ?gdbPC;
          eg:gdbPerCapitaGrowth ?gdbPCGrowth;
          eg:inflationGDP ?inflationGDP;
          eg:inflationPPI ?inflationPPI;
          eg:unemployment ?unemployment;
          .
}
WHERE {
  BIND(IRI(CONCAT('http://hrachjar.cz/economy/', LCASE(REPLACE(?c, " ", "-")))) AS ?aUri)
  BIND(IRI(CONCAT('http://hrachjar.cz/country/', LCASE(REPLACE(?c, " ", "-")))) AS ?countryUri)
  BIND(IRI(CONCAT('http://example.org/ns#year', LCASE(REPLACE(?a, " ", "-")))) AS ?year)
  BIND(xsd:double(?e) AS ?gdb)
  BIND(xsd:double(?f) AS ?gdbGrowth)
  BIND(xsd:double(?g) AS ?gdbPC)
  BIND(xsd:double(?h) AS ?gdbPCGrowth)
  BIND(xsd:double(?i) AS ?inflationGDP)
  BIND(xsd:double(?j) AS ?inflationPPI)
  BIND(xsd:double(?k) AS ?unemployment)
}
OFFSET 1
